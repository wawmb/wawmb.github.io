<!doctype html><html lang="en" data-palette="blue"
  >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Smart-Home - Dustin&#39;s Website</title><link rel="apple-touch-icon" href="/images/icons/icon-180x180.png" sizes="180x180">
<link rel="icon" href="/images/icons/icon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/images/icons/icon-16x16.png" sizes="16x16" type="image/png">
<link rel="icon" href="/images/icons/favicon.ico">
<link rel="manifest" href="/en/manifest.json">
<meta name="keywords" content="" />
<meta name="description" content="Introduction to Smart-Home
  Smart home is a residential platform, which integrates the facilities related to home life by using generic cabling technology, network communication technology, security prevention technology, automatic control technology and audio and video technology, constructs an efficient management system of residential facilities and family schedule affairs, improves the safety, convenience, comfort and artistry of home, and realizes an environment-friendly and energy-saving living environment." /><meta name="robots" content="index, follow" /><meta itemprop="name" content="Smart-Home">
<meta itemprop="description" content="Introduction to Smart-Home
  Smart home is a residential platform, which integrates the facilities related to home life by using generic cabling technology, network communication technology, security prevention technology, automatic control technology and audio and video technology, constructs an efficient management system of residential facilities and family schedule affairs, improves the safety, convenience, comfort and artistry of home, and realizes an environment-friendly and energy-saving living environment."><meta itemprop="datePublished" content="2020-05-19T19:54:29+08:00" />
<meta itemprop="dateModified" content="2020-05-19T19:54:29+08:00" />
<meta itemprop="wordCount" content="2394">
<meta itemprop="keywords" content="Smart-Home," /><meta property="og:title" content="Smart-Home" />
<meta property="og:description" content="Introduction to Smart-Home
  Smart home is a residential platform, which integrates the facilities related to home life by using generic cabling technology, network communication technology, security prevention technology, automatic control technology and audio and video technology, constructs an efficient management system of residential facilities and family schedule affairs, improves the safety, convenience, comfort and artistry of home, and realizes an environment-friendly and energy-saving living environment." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/en/docs/smart-home/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2020-05-19T19:54:29+08:00" />
<meta property="article:modified_time" content="2020-05-19T19:54:29+08:00" />
<meta property="og:see_also" content="/en/docs/autojs/" /><meta property="og:see_also" content="/en/posts/markdown-syntax/" /><meta property="og:see_also" content="/en/docs/wechat-applet/" /><meta property="og:see_also" content="/en/docs/test-tooling/" /><meta property="og:see_also" content="/en/docs/xintang-project-hall-induction/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Smart-Home"/>
<meta name="twitter:description" content="Introduction to Smart-Home
  Smart home is a residential platform, which integrates the facilities related to home life by using generic cabling technology, network communication technology, security prevention technology, automatic control technology and audio and video technology, constructs an efficient management system of residential facilities and family schedule affairs, improves the safety, convenience, comfort and artistry of home, and realizes an environment-friendly and energy-saving living environment."/>
<meta property="og:image" content="/images/1.png"/>
  <meta name="twitter:image" content="/images/1.png"/><link rel="stylesheet" href="/css/main.min.a74c8f05dc4b16520ce1637158954c31b4b0ab705ec9f6762d5b05039f72942e.css" integrity="sha256-p0yPBdxLFlIM4WNxWJVMMbSwq3BeyfZ2LVsFA59ylC4=" crossorigin="anonymous"><link rel="stylesheet" href="/css/viewer.min.3d228794bcedbbfa0412beb8fbc1ec6973202945e42af7004f742a4d7bd620ab.css" integrity="sha256-PSKHlLztu/oEEr64&#43;8HsaXMgKUXkKvcAT3QqTXvWIKs=" crossorigin="anonymous"></head>
  <body><script>const items=['mode','palette'];items.forEach(function(a){const b=localStorage.getItem('hbs-'+a);b&&document.body.parentElement.setAttribute('data-'+a,b)})</script><header><nav class="navbar top-app-bar top-app-bar-expand-lg fixed-top">
  <div class="container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fas fa-bars"></i>
    </button><a class="navbar-brand flex-grow-1 flex-lg-grow-0 text-center text-lg-start mx-auto me-lg-3" href="/en/"><img class="logo" alt="Logo" src="/images/1.png" loading="lazy"
   width="1023" height="965"
   />
Welcome to Visit
    </a>
    
    <button class="navbar-settings" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSettings"
  aria-controls="offcanvasSettings" aria-label="Toggle settings">
  <i class="fas fa-ellipsis-v"></i>
</button>

<div class="offcanvas offcanvas-end surface h-100" tabindex="-1" id="offcanvasSettings" aria-labelledby="offcanvasSettings">
  <div class="offcanvas-header">
    <h3 class="offcanvas-title">Settings</h3>
    <button type="button" class="btn btn-sm btn-outline-primary" data-bs-dismiss="offcanvas" aria-label="Close">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <div class="offcanvas-body d-flex flex-column"><section class="setting">
  <form class="row">
    <div class="col-auto">
      <label for="fontSize" class="form-label"><i class="fas fa-fw fa-language"></i> Language</label>
    </div>
    <div class="col-auto ms-auto">
      <div class="dropdown">
        <a class="btn btn-sm btn-outline-primary dropdown-toggle" href="#" id="languageDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          English
        </a>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="languageDropdown"><li><a class="dropdown-item" href="/zh-cn/">简体中文</a></li></ul>
      </div>
    </div>
  </form>
</section>


<section class="setting">
  <form class="row">
    <div class="col-auto">
      <label><i class="fas fa-fw fa-adjust"></i> Mode</label>
    </div>
    <div class="col-auto ms-auto">
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" id="modeSwitcher">
      </div>
    </div>
  </form>
</section>

<section class="setting">
  <form class="font-size-switcher-form row">
    <div class="col-auto">
      <label for="fontSize" class="form-label"><i class="fas fa-fw fa-font"></i> Font Size</label>
    </div>
    <div class="col-auto ms-auto">
      <input type="range" class="form-range" min="-2" max="2" id="fontSize">
    </div>
  </form>
</section>


<section class="setting palettes">
  <form class="row">
    <div class="col-auto">
      <label><i class="fas fa-fw fa-palette"></i> Palette</label>
    </div>
    <div class="col-auto ms-auto">
      <a id="btnPalette" class="btn btn-sm btn-outline-primary" role="button" aria-label="palettePicker">
        <i class="fas fa-eye-dropper"></i>
      </a>
    </div>
  </form>
  <div class="mt-2 d-flex justify-content-between visually-hidden" id="palettePicker"><button type="button" id="palette-blue" aria-label="Blue"
        class="btn btn-sm w-100 palette" data-palette="blue">
      </button><button type="button" id="palette-blue-gray" aria-label="Blue Gray"
        class="btn btn-sm w-100 palette" data-palette="blue-gray">
      </button><button type="button" id="palette-brown" aria-label="Brown"
        class="btn btn-sm w-100 palette" data-palette="brown">
      </button><button type="button" id="palette-cyan" aria-label="Cyan"
        class="btn btn-sm w-100 palette" data-palette="cyan">
      </button><button type="button" id="palette-green" aria-label="Green"
        class="btn btn-sm w-100 palette" data-palette="green">
      </button><button type="button" id="palette-indigo" aria-label="Indigo"
        class="btn btn-sm w-100 palette" data-palette="indigo">
      </button><button type="button" id="palette-orange" aria-label="Orange"
        class="btn btn-sm w-100 palette" data-palette="orange">
      </button><button type="button" id="palette-pink" aria-label="Pink"
        class="btn btn-sm w-100 palette" data-palette="pink">
      </button><button type="button" id="palette-purple" aria-label="Purple"
        class="btn btn-sm w-100 palette" data-palette="purple">
      </button><button type="button" id="palette-red" aria-label="Red"
        class="btn btn-sm w-100 palette" data-palette="red">
      </button><button type="button" id="palette-teal" aria-label="Teal"
        class="btn btn-sm w-100 palette" data-palette="teal">
      </button><button type="button" id="palette-yellow" aria-label="Yellow"
        class="btn btn-sm w-100 palette" data-palette="yellow">
      </button></div>
</section>
<section class="setting actions d-flex justify-content-around mt-auto overflow-auto">
  <a role="button" class="action action-go-back" href="javascript: window.history.back();">
    <span class="action-icon"><i class="fas fa-2x fa-arrow-left"></i></span> Go back
  </a>
  <a role="button" class="action action-reload-page">
    <span class="action-icon"><i class="fas fa-2x fa-redo-alt"></i></span> Reload
  </a>
  <a role="button" class="action action-copy-url">
    <span class="action-icon"><i class="fas fa-2x fa-link"></i></span> Copy URL
  </a></section>

</div>
</div>

    <div class="collapse navbar-collapse" tabindex="-1" id="navbarSupportedContent" aria-labelledby="navbarSupportedContent">
      <form class="search-bar my-1" action="/en/search">
  <div class="input-group input-group-sm">
    <span class="btn btn-search disabled position-absolute left-0"><i class="fas fa-fw fa-search"></i></span>
    <input class="form-control rounded-pill" name="q" type="search" aria-label="Search">
  </div>
</form>
      <ul class="navbar-nav ms-auto"><li class="nav-item">
          <a class="nav-link" href="/en/series/">
            <i class="fas fa-fw fa-columns"></i>Series
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="/en/archives/">
            <i class="fas fa-fw fa-file-archive"></i>Archives
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="/en/categories/">
            <i class="fas fa-fw fa-folder"></i>Categories
          </a>
        </li><li class="nav-item">
          <a class="nav-link" href="/en/tags/">
            <i class="fas fa-fw fa-tags"></i>Tags
          </a>
        </li><li class="nav-item dropdown">
          <a class="nav-link" id="navbarDropdownMenu" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-fw fa-chevron-circle-down"></i>Menu
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenu"><li>
              <a class="dropdown-item"
                href="/en/about/">
                Resume
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://gitee.com/wawmm" target="_blank" rel="noopener noreferrer">
                Gitee
              </a>
            </li><li>
              <a class="dropdown-item"
                href="https://github.com/wawmb/wawmb.github.io" target="_blank" rel="noopener noreferrer">
                Github
              </a>
            </li></ul>
        </li></ul>
    </div>
  </div>
</nav>
</header>
<main role="main" class="container">
      <div class="row content"><button class="catalog-toggle d-lg-none position-fixed top-0 left-0 h-100 p-0" type="button" data-bs-toggle="collapse" data-bs-target=".docs-catalog" aria-expanded="false" aria-controls="collapseCatalog">
    <i class="catalog-toggle-icon fas fa-chevron-left" data-fa-transform="rotate-180"></i>
</button>
<aside class="docs-catalog col-lg-2 collapse collapse-horizontal catalog-collapse" tabindex="-1">
  <div class="container px-0 px-lg-1">
    <div class="row card component">
      <div class="card-body">
        <ul class="list-unstyled mb-2"><li class="mb-2" tabindex="-1">
          <a href="/en/docs/autojs/">Autojs</a>
        </li><li class="mb-2" tabindex="-1">
          <a href="/en/docs/electronic-contest/">Electronic-Contest</a>
        </li><li class="mb-2" tabindex="-1">
          <a href="/en/docs/hetai-project/">Hetai-Project</a>
        </li><li class="mb-2 active text-accent" tabindex="-1">
          <a href="/en/docs/smart-home/">Smart-Home</a>
        </li><li class="mb-2" tabindex="-1">
          <a href="/en/docs/test-tooling/">Test-Tooling</a>
        </li><li class="mb-2" tabindex="-1">
          <a href="/en/docs/wechat-applet/">Wechat-Applet</a>
        </li><li class="mb-2" tabindex="-1">
          <a href="/en/docs/xintang-project-digital-display/">Xintang-Project-Digital-Display</a>
        </li><li class="mb-2" tabindex="-1">
          <a href="/en/docs/xintang-project-hall-induction/">Xintang-Project-Hall-Induction</a>
        </li></ul>
      </div>
    </div>
  </div>
</aside><div class="col-lg-7 ms-auto">
  <div class="container"><nav class="row card component" aria-label="breadcrumb">
  <div class="card-body">
    <ol class="breadcrumb "><li class="breadcrumb-item"><a href="/en/">Home</a></li><li class="breadcrumb-item"><a href="/en/docs/">Docs</a></li><li class="breadcrumb-item active">Smart-Home</li></ol>
  </div>
</nav><div class="post-panel-wrapper">
  <div class="d-flex flex-column component rounded post-panel">
    
    <a class="action action-panel-toggler" role="button" title="Panel toggler">
      <i class="fas fa-fw fa-chevron-circle-down"></i>
    </a>
    <a id="sidebarToggler" class="action d-none d-lg-block" role="button" title="Sidebar toggler">
  <i class="fas fa-fw fa-expand-alt" data-fa-transform="rotate-45"></i>
</a>

    
  <div class="post-translations nav-item dropdown dropstart action">
    <a class="nav-link p-0" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" aria-label="Translations dropdown menu"
      title="Translations">
      <i class="fas fa-fw fa-language"></i>
    </a>
    <div class="dropdown-menu"><a class="dropdown-item post-translation" href="/zh-cn/docs/smart-home/">简体中文</a></div>
  </div>


    
    <a class="action" href="#post-copyright" role="button" aria-label="Copyright" title="Copyright">
  <i class="fas fa-fw fa-copyright"></i>
</a>
    
    <a class="action d-lg-none" href="#postTOC" aria-controls="Table of contents" role="button" title="Table of contents">
  <i class="fas fa-fw fa-list-alt"></i>
</a>
    
  </div>
</div>
<article class="row card component mb-4 post">
<div class="card-header ">
    <h1 class="card-title post-title">Smart-Home
</h1>
</div>
<div class="card-body"><div class="post-meta">
  <span class="post-date" title="created on 2020-05-19 19:54:29 &#43;0800 CST.">
    May 19, 2020
  </span><span class="post-reading-time">
    12 min read
  </span><span class="post-taxonomies"><a href="/en/categories/smart-home/" class="badge post-taxonomy">Smart-Home</a><a href="/en/series/docs/" class="badge post-taxonomy">Docs</a><a href="/en/tags/smart-home/" class="badge post-taxonomy">Smart-Home</a></span>
</div>
<div class="alert alert-info" role="alert">
    This static website is built using <code>Hugo</code>, and all articles need to be written in <code>markdown syntax</code>. If you want to know about markdown,
    please take a look at <a href="/en/posts/markdown-syntax" target="_blank">Markdown Syntax</a>.
</div><div class="post-content mb-3"><h2 id="introduction-to-smart-home">Introduction to Smart-Home<a class="anchor ms-1" href="#introduction-to-smart-home"><i class="fas fa-link"></i></a></h2>
<p>  Smart home is a residential platform, which integrates the facilities related to home life by using generic cabling technology, network communication technology, security prevention technology, automatic control technology and audio and video technology, constructs an efficient management system of residential facilities and family schedule affairs, improves the safety, convenience, comfort and artistry of home, and realizes an environment-friendly and energy-saving living environment.</p>
<h2 id="project-realization">Project realization<a class="anchor ms-1" href="#project-realization"><i class="fas fa-link"></i></a></h2>
<p>  Smart home equipment developed and designed based on esp8266 and esp32-cam, including temperature detection, light bar control, computer LAN wake-up, intelligent camera car and other Internet of things smart home projects, integrating multi platform adaptation such as Xiaoai classmate, Xiaodu, tmall elf and so on.</p>
<h2 id="concrete-step">Concrete Step<a class="anchor ms-1" href="#concrete-step"><i class="fas fa-link"></i></a></h2>
<p>  WiFi access is used. When the device and mobile phone are in the same LAN, it is LAN communication. In other cases, mqtt remote communication is used.</p>
<p>  The arp8266 / esp32 extension needs to be installed in Arduino ide</p>
<p>  Arduino ide 1.8.7 or later</p>
<p>  Be sure to use esp8266 / esp32 Arduino package with release version 3.0.0 or above</p>
<p>  1. WOL wake-up of PC is realized through UDP broadcast, which can realize network wake-up with the motherboard. Power on and power off can be realized with Shutdown UDP broadcast，Take <code>esp8266</code> as an example：</p>
<div class="highlight"><pre class="chroma"><code class="language-ino" data-lang="ino"><span class="ln">  1</span><span class="cp">#define BLINKER_WIFI
</span><span class="ln">  2</span><span class="cp">#define BLINKER_MIOT_OUTLET
</span><span class="ln">  3</span><span class="cp"></span>
<span class="ln">  4</span><span class="cp">#define BLINKER_DUEROS_OUTLET
</span><span class="ln">  5</span><span class="cp"></span>
<span class="ln">  6</span><span class="cp">#define BLINKER_ALIGENIE_OUTLET
</span><span class="ln">  7</span><span class="cp"></span>
<span class="ln">  8</span><span class="c1">//#define BLINKER_WITHOUT_SSL
</span><span class="ln">  9</span><span class="c1"></span>
<span class="ln"> 10</span><span class="cp">#include</span> <span class="cpf">&lt;Servo.h&gt; </span><span class="cp">
</span><span class="ln"> 11</span><span class="cp">#include</span> <span class="cpf">&lt;Blinker.h&gt;</span><span class="cp">
</span><span class="ln"> 12</span><span class="cp">#include</span> <span class="cpf">&lt;WiFiUDP.h&gt;</span><span class="cp">
</span><span class="ln"> 13</span><span class="cp">#include</span> <span class="cpf">&lt;ESP8266Ping.h&gt;</span><span class="cp">
</span><span class="ln"> 14</span><span class="cp"></span>
<span class="ln"> 15</span><span class="kt">char</span> <span class="n">auth</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&#34;35a74dc36a92&#34;</span><span class="p">;</span>
<span class="ln"> 16</span><span class="kt">char</span> <span class="n">ssid</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&#34;Sweet_meng&#34;</span><span class="p">;</span>
<span class="ln"> 17</span><span class="kt">char</span> <span class="n">pswd</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&#34;aita0116.&#34;</span><span class="p">;</span>
<span class="ln"> 18</span>
<span class="ln"> 19</span><span class="n">BlinkerButton</span> <span class="nf">Button1</span><span class="p">(</span><span class="s">&#34;k1&#34;</span><span class="p">);</span>
<span class="ln"> 20</span><span class="n">BlinkerSlider</span> <span class="nf">Slider1</span><span class="p">(</span><span class="s">&#34;ser-num&#34;</span><span class="p">);</span>   <span class="c1">//实时位置 滑块 数据键名  范围1-180
</span><span class="ln"> 21</span><span class="c1"></span>
<span class="ln"> 22</span><span class="nc">Servo</span> <span class="n">myservo</span><span class="p">;</span>
<span class="ln"> 23</span><span class="kt">int</span> <span class="n">ser_num</span><span class="p">;</span>
<span class="ln"> 24</span><span class="c1">//唤醒目标电脑的mac地址
</span><span class="ln"> 25</span><span class="c1"></span><span class="kt">byte</span> <span class="n">mac</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xE0</span><span class="p">,</span> <span class="mh">0x70</span><span class="p">,</span> <span class="mh">0x49</span><span class="p">,</span> <span class="mh">0x1D</span><span class="p">,</span> <span class="mh">0xE7</span><span class="p">};</span>
<span class="ln"> 26</span><span class="kt">byte</span> <span class="n">preamble</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">};</span>
<span class="ln"> 27</span><span class="c1">//幻数据包需要在局域网中广播发送,要控制的电脑的网段的255地址
</span><span class="ln"> 28</span><span class="c1"></span><span class="nc">IPAddress</span> <span class="nf">ip</span><span class="p">(</span><span class="mi">192</span><span class="p">,</span> <span class="mi">168</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<span class="ln"> 29</span><span class="c1">//建立一个WiFiUDP对象 UDP
</span><span class="ln"> 30</span><span class="c1"></span><span class="nc">WiFiUDP</span> <span class="n">UDP</span><span class="p">;</span>
<span class="ln"> 31</span><span class="c1">//UDP接收地址，我这里是使用的广播，注意网段
</span><span class="ln"> 32</span><span class="c1"></span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">UDPAddress</span> <span class="o">=</span> <span class="s">&#34;192.168.0.108&#34;</span><span class="p">;</span>
<span class="ln"> 33</span><span class="c1">//UDP端口
</span><span class="ln"> 34</span><span class="c1"></span><span class="k">const</span> <span class="kt">int</span> <span class="n">UDPPort</span> <span class="o">=</span> <span class="mi">7101</span><span class="p">;</span>
<span class="ln"> 35</span><span class="kt">bool</span> <span class="n">oState</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="ln"> 36</span>
<span class="ln"> 37</span><span class="kt">void</span> <span class="nf">heartbeat</span><span class="p">()</span>
<span class="ln"> 38</span><span class="p">{</span>
<span class="ln"> 39</span>    <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;heartbeat,state: &#34;</span><span class="p">,</span> <span class="n">oState</span><span class="p">);</span>
<span class="ln"> 40</span>    <span class="k">if</span> <span class="p">(</span><span class="kc">HIGH</span> <span class="o">==</span> <span class="n">oState</span><span class="p">)</span>
<span class="ln"> 41</span>    <span class="p">{</span>
<span class="ln"> 42</span>        <span class="n">Button1</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">&#34;on&#34;</span><span class="p">);</span>
<span class="ln"> 43</span>    <span class="p">}</span>
<span class="ln"> 44</span>    <span class="k">else</span>
<span class="ln"> 45</span>    <span class="p">{</span>
<span class="ln"> 46</span>        <span class="n">Button1</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln"> 47</span>    <span class="p">}</span>
<span class="ln"> 48</span><span class="p">}</span>
<span class="ln"> 49</span>
<span class="ln"> 50</span><span class="kt">void</span> <span class="nf">button1_callback</span><span class="p">(</span><span class="k">const</span> <span class="kt">String</span> <span class="o">&amp;</span><span class="n">state</span><span class="p">)</span>
<span class="ln"> 51</span><span class="p">{</span>
<span class="ln"> 52</span>    <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;get button state: &#34;</span><span class="p">,</span> <span class="n">state</span><span class="p">);</span>
<span class="ln"> 53</span>    <span class="k">if</span> <span class="p">(</span><span class="n">state</span> <span class="o">==</span> <span class="n">BLINKER_CMD_ON</span><span class="p">)</span>
<span class="ln"> 54</span>    <span class="p">{</span>
<span class="ln"> 55</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;Toggle on!&#34;</span><span class="p">);</span>
<span class="ln"> 56</span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">beginPacket</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>               <span class="c1">//UDP发送到目标（IP，端口）
</span><span class="ln"> 57</span><span class="c1"></span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">preamble</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">preamble</span><span class="p">);</span> <span class="c1">//写入包头(FF,FF,FF,FF,FF,FF)
</span><span class="ln"> 58</span><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">byte</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">16</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="ln"> 59</span>        <span class="p">{</span>
<span class="ln"> 60</span>            <span class="n">UDP</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">mac</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">mac</span><span class="p">);</span>
<span class="ln"> 61</span>        <span class="p">}</span>
<span class="ln"> 62</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;唤醒主机&#34;</span><span class="p">);</span>
<span class="ln"> 63</span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">endPacket</span><span class="p">();</span>
<span class="ln"> 64</span>        <span class="n">Button1</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">&#34;on&#34;</span><span class="p">);</span>
<span class="ln"> 65</span>        <span class="n">oState</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="ln"> 66</span>    <span class="p">}</span>
<span class="ln"> 67</span>    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">state</span> <span class="o">==</span> <span class="n">BLINKER_CMD_OFF</span><span class="p">)</span>
<span class="ln"> 68</span>    <span class="p">{</span>
<span class="ln"> 69</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;Toggle off!&#34;</span><span class="p">);</span>
<span class="ln"> 70</span>        <span class="kt">char</span> <span class="n">sd</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&#34;shut&#34;</span><span class="p">;</span>                   <span class="c1">//与电脑相对应的指令
</span><span class="ln"> 71</span><span class="c1"></span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">beginPacket</span><span class="p">(</span><span class="n">UDPAddress</span><span class="p">,</span> <span class="n">UDPPort</span><span class="p">);</span> <span class="c1">//准备发送，设置地址和端口
</span><span class="ln"> 72</span><span class="c1"></span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">write</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">sd</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
<span class="ln"> 73</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;关闭主机&#34;</span><span class="p">);</span>
<span class="ln"> 74</span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">endPacket</span><span class="p">();</span>
<span class="ln"> 75</span>        <span class="n">Button1</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln"> 76</span>        <span class="n">oState</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="ln"> 77</span>    <span class="p">}</span>
<span class="ln"> 78</span>    <span class="n">BlinkerMIOT</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln"> 79</span>    <span class="n">BlinkerMIOT</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln"> 80</span>
<span class="ln"> 81</span>    <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln"> 82</span>    <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln"> 83</span>
<span class="ln"> 84</span>    <span class="n">BlinkerAliGenie</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln"> 85</span>    <span class="n">BlinkerAliGenie</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln"> 86</span><span class="p">}</span>
<span class="ln"> 87</span>
<span class="ln"> 88</span><span class="kt">void</span> <span class="nf">slider1_callback</span><span class="p">(</span><span class="kt">int32_t</span> <span class="n">value</span><span class="p">)</span>
<span class="ln"> 89</span><span class="p">{</span>
<span class="ln"> 90</span>    <span class="n">ser_num</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
<span class="ln"> 91</span>    <span class="n">myservo</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">ser_num</span><span class="p">);</span>
<span class="ln"> 92</span>    <span class="n">Blinker</span><span class="p">.</span><span class="nf">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="ln"> 93</span>    <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;get slider value: &#34;</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
<span class="ln"> 94</span><span class="p">}</span>
<span class="ln"> 95</span>
<span class="ln"> 96</span><span class="kt">void</span> <span class="nf">miotPowerState</span><span class="p">(</span><span class="k">const</span> <span class="kt">String</span> <span class="o">&amp;</span><span class="n">state</span><span class="p">)</span>
<span class="ln"> 97</span><span class="p">{</span>
<span class="ln"> 98</span>    <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;need set power state: &#34;</span><span class="p">,</span> <span class="n">state</span><span class="p">);</span>
<span class="ln"> 99</span>    <span class="k">if</span> <span class="p">(</span><span class="n">state</span> <span class="o">==</span> <span class="n">BLINKER_CMD_ON</span><span class="p">)</span>
<span class="ln">100</span>    <span class="p">{</span>
<span class="ln">101</span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">beginPacket</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>               <span class="c1">//UDP发送到目标（IP，端口）
</span><span class="ln">102</span><span class="c1"></span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">preamble</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">preamble</span><span class="p">);</span> <span class="c1">//写入包头(FF,FF,FF,FF,FF,FF)
</span><span class="ln">103</span><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">byte</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">16</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="ln">104</span>        <span class="p">{</span>
<span class="ln">105</span>            <span class="n">UDP</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">mac</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">mac</span><span class="p">);</span>
<span class="ln">106</span>        <span class="p">}</span>
<span class="ln">107</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;唤醒主机&#34;</span><span class="p">);</span>
<span class="ln">108</span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">endPacket</span><span class="p">();</span>
<span class="ln">109</span>        <span class="n">oState</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="ln">110</span>    <span class="p">}</span>
<span class="ln">111</span>    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">state</span> <span class="o">==</span> <span class="n">BLINKER_CMD_OFF</span><span class="p">)</span>
<span class="ln">112</span>    <span class="p">{</span>
<span class="ln">113</span>        <span class="kt">char</span> <span class="n">sd</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&#34;shut&#34;</span><span class="p">;</span>                   <span class="c1">//与电脑相对应的指令
</span><span class="ln">114</span><span class="c1"></span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">beginPacket</span><span class="p">(</span><span class="n">UDPAddress</span><span class="p">,</span> <span class="n">UDPPort</span><span class="p">);</span> <span class="c1">//准备发送，设置地址和端口
</span><span class="ln">115</span><span class="c1"></span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">write</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">sd</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
<span class="ln">116</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;关闭主机&#34;</span><span class="p">);</span>
<span class="ln">117</span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">endPacket</span><span class="p">();</span>
<span class="ln">118</span>        <span class="n">oState</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="ln">119</span>    <span class="p">}</span>
<span class="ln">120</span>    <span class="n">BlinkerMIOT</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln">121</span>    <span class="n">BlinkerMIOT</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln">122</span><span class="p">}</span>
<span class="ln">123</span>
<span class="ln">124</span><span class="kt">void</span> <span class="nf">miotQuery</span><span class="p">(</span><span class="kt">int32_t</span> <span class="n">queryCode</span><span class="p">)</span>
<span class="ln">125</span><span class="p">{</span>
<span class="ln">126</span>    <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;MIOT Query codes: &#34;</span><span class="p">,</span> <span class="n">queryCode</span><span class="p">);</span>
<span class="ln">127</span>    <span class="k">switch</span> <span class="p">(</span><span class="n">queryCode</span><span class="p">)</span>
<span class="ln">128</span>    <span class="p">{</span>
<span class="ln">129</span>    <span class="k">case</span> <span class="nl">BLINKER_CMD_QUERY_ALL_NUMBER</span><span class="p">:</span>
<span class="ln">130</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;MIOT Query All&#34;</span><span class="p">);</span>
<span class="ln">131</span>        <span class="n">BlinkerMIOT</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln">132</span>        <span class="n">BlinkerMIOT</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln">133</span>        <span class="k">break</span><span class="p">;</span>
<span class="ln">134</span>    <span class="k">case</span> <span class="nl">BLINKER_CMD_QUERY_POWERSTATE_NUMBER</span><span class="p">:</span>
<span class="ln">135</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;MIOT Query Power State&#34;</span><span class="p">);</span>
<span class="ln">136</span>        <span class="n">BlinkerMIOT</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln">137</span>        <span class="n">BlinkerMIOT</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln">138</span>        <span class="k">break</span><span class="p">;</span>
<span class="ln">139</span>    <span class="k">default</span><span class="o">:</span>
<span class="ln">140</span>        <span class="n">BlinkerMIOT</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln">141</span>        <span class="n">BlinkerMIOT</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln">142</span>        <span class="k">break</span><span class="p">;</span>
<span class="ln">143</span>    <span class="p">}</span>
<span class="ln">144</span><span class="p">}</span>
<span class="ln">145</span>
<span class="ln">146</span><span class="kt">void</span> <span class="nf">duerPowerState</span><span class="p">(</span><span class="k">const</span> <span class="kt">String</span> <span class="o">&amp;</span><span class="n">state</span><span class="p">)</span>
<span class="ln">147</span><span class="p">{</span>
<span class="ln">148</span>    <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;need set power state: &#34;</span><span class="p">,</span> <span class="n">state</span><span class="p">);</span>
<span class="ln">149</span>    <span class="k">if</span> <span class="p">(</span><span class="n">state</span> <span class="o">==</span> <span class="n">BLINKER_CMD_ON</span><span class="p">)</span>
<span class="ln">150</span>    <span class="p">{</span>
<span class="ln">151</span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">beginPacket</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>               <span class="c1">//UDP发送到目标（IP，端口）
</span><span class="ln">152</span><span class="c1"></span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">preamble</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">preamble</span><span class="p">);</span> <span class="c1">//写入包头(FF,FF,FF,FF,FF,FF)
</span><span class="ln">153</span><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">byte</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">16</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="ln">154</span>        <span class="p">{</span>
<span class="ln">155</span>            <span class="n">UDP</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">mac</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">mac</span><span class="p">);</span>
<span class="ln">156</span>        <span class="p">}</span>
<span class="ln">157</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;唤醒主机&#34;</span><span class="p">);</span>
<span class="ln">158</span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">endPacket</span><span class="p">();</span>
<span class="ln">159</span>        <span class="n">oState</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="ln">160</span>    <span class="p">}</span>
<span class="ln">161</span>    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">state</span> <span class="o">==</span> <span class="n">BLINKER_CMD_OFF</span><span class="p">)</span>
<span class="ln">162</span>    <span class="p">{</span>
<span class="ln">163</span>        <span class="kt">char</span> <span class="n">sd</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&#34;shut&#34;</span><span class="p">;</span>                   <span class="c1">//与电脑相对应的指令
</span><span class="ln">164</span><span class="c1"></span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">beginPacket</span><span class="p">(</span><span class="n">UDPAddress</span><span class="p">,</span> <span class="n">UDPPort</span><span class="p">);</span> <span class="c1">//准备发送，设置地址和端口
</span><span class="ln">165</span><span class="c1"></span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">write</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">sd</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
<span class="ln">166</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;关闭主机&#34;</span><span class="p">);</span>
<span class="ln">167</span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">endPacket</span><span class="p">();</span>
<span class="ln">168</span>        <span class="n">oState</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="ln">169</span>    <span class="p">}</span>
<span class="ln">170</span>    <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln">171</span>    <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln">172</span><span class="p">}</span>
<span class="ln">173</span>
<span class="ln">174</span><span class="kt">void</span> <span class="nf">duerQuery</span><span class="p">(</span><span class="kt">int32_t</span> <span class="n">queryCode</span><span class="p">)</span>
<span class="ln">175</span><span class="p">{</span>
<span class="ln">176</span>    <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;DuerOS Query codes: &#34;</span><span class="p">,</span> <span class="n">queryCode</span><span class="p">);</span>
<span class="ln">177</span>    <span class="k">switch</span> <span class="p">(</span><span class="n">queryCode</span><span class="p">)</span>
<span class="ln">178</span>    <span class="p">{</span>
<span class="ln">179</span>    <span class="k">case</span> <span class="nl">BLINKER_CMD_QUERY_ALL_NUMBER</span><span class="p">:</span>
<span class="ln">180</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;DuerOS Query All&#34;</span><span class="p">);</span>
<span class="ln">181</span>        <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln">182</span>        <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="n">time</span><span class="p">(</span><span class="nf">millis</span><span class="p">());</span>
<span class="ln">183</span>        <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln">184</span>        <span class="k">break</span><span class="p">;</span>
<span class="ln">185</span>    <span class="k">case</span> <span class="nl">BLINKER_CMD_QUERY_POWERSTATE_NUMBER</span><span class="p">:</span>
<span class="ln">186</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;DuerOS Query Power State&#34;</span><span class="p">);</span>
<span class="ln">187</span>        <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln">188</span>        <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln">189</span>        <span class="k">break</span><span class="p">;</span>
<span class="ln">190</span>    <span class="k">case</span> <span class="nl">BLINKER_CMD_QUERY_TIME_NUMBER</span><span class="p">:</span>
<span class="ln">191</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;DuerOS Query time&#34;</span><span class="p">);</span>
<span class="ln">192</span>        <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="n">time</span><span class="p">(</span><span class="nf">millis</span><span class="p">());</span>
<span class="ln">193</span>        <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln">194</span>        <span class="k">break</span><span class="p">;</span>
<span class="ln">195</span>    <span class="k">default</span><span class="o">:</span>
<span class="ln">196</span>        <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln">197</span>        <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="n">time</span><span class="p">(</span><span class="nf">millis</span><span class="p">());</span>
<span class="ln">198</span>        <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln">199</span>        <span class="k">break</span><span class="p">;</span>
<span class="ln">200</span>    <span class="p">}</span>
<span class="ln">201</span><span class="p">}</span>
<span class="ln">202</span>
<span class="ln">203</span><span class="kt">void</span> <span class="nf">aligeniePowerState</span><span class="p">(</span><span class="k">const</span> <span class="kt">String</span> <span class="o">&amp;</span><span class="n">state</span><span class="p">)</span>
<span class="ln">204</span><span class="p">{</span>
<span class="ln">205</span>    <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;need set power state: &#34;</span><span class="p">,</span> <span class="n">state</span><span class="p">);</span>
<span class="ln">206</span>    <span class="k">if</span> <span class="p">(</span><span class="n">state</span> <span class="o">==</span> <span class="n">BLINKER_CMD_ON</span><span class="p">)</span>
<span class="ln">207</span>    <span class="p">{</span>
<span class="ln">208</span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">beginPacket</span><span class="p">(</span><span class="n">ip</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>               <span class="c1">//UDP发送到目标（IP，端口）
</span><span class="ln">209</span><span class="c1"></span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">preamble</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">preamble</span><span class="p">);</span> <span class="c1">//写入包头(FF,FF,FF,FF,FF,FF)
</span><span class="ln">210</span><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">byte</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">16</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="ln">211</span>        <span class="p">{</span>
<span class="ln">212</span>            <span class="n">UDP</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">mac</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">mac</span><span class="p">);</span>
<span class="ln">213</span>        <span class="p">}</span>
<span class="ln">214</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;唤醒主机&#34;</span><span class="p">);</span>
<span class="ln">215</span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">endPacket</span><span class="p">();</span>
<span class="ln">216</span>        <span class="n">oState</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="ln">217</span>    <span class="p">}</span>
<span class="ln">218</span>    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">state</span> <span class="o">==</span> <span class="n">BLINKER_CMD_OFF</span><span class="p">)</span>
<span class="ln">219</span>    <span class="p">{</span>
<span class="ln">220</span>        <span class="kt">char</span> <span class="n">sd</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&#34;shut&#34;</span><span class="p">;</span>                   <span class="c1">//与电脑相对应的指令
</span><span class="ln">221</span><span class="c1"></span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">beginPacket</span><span class="p">(</span><span class="n">UDPAddress</span><span class="p">,</span> <span class="n">UDPPort</span><span class="p">);</span> <span class="c1">//准备发送，设置地址和端口
</span><span class="ln">222</span><span class="c1"></span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">write</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">sd</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>
<span class="ln">223</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;关闭主机&#34;</span><span class="p">);</span>
<span class="ln">224</span>        <span class="n">UDP</span><span class="p">.</span><span class="nf">endPacket</span><span class="p">();</span>
<span class="ln">225</span>        <span class="n">oState</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="ln">226</span>    <span class="p">}</span>
<span class="ln">227</span>    <span class="n">BlinkerAliGenie</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln">228</span>    <span class="n">BlinkerAliGenie</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln">229</span><span class="p">}</span>
<span class="ln">230</span>
<span class="ln">231</span><span class="kt">void</span> <span class="nf">aligenieQuery</span><span class="p">(</span><span class="kt">int32_t</span> <span class="n">queryCode</span><span class="p">)</span>
<span class="ln">232</span><span class="p">{</span>
<span class="ln">233</span>    <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;AliGenie Query codes: &#34;</span><span class="p">,</span> <span class="n">queryCode</span><span class="p">);</span>
<span class="ln">234</span>    <span class="k">switch</span> <span class="p">(</span><span class="n">queryCode</span><span class="p">)</span>
<span class="ln">235</span>    <span class="p">{</span>
<span class="ln">236</span>    <span class="k">case</span> <span class="nl">BLINKER_CMD_QUERY_ALL_NUMBER</span><span class="p">:</span>
<span class="ln">237</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;AliGenie Query All&#34;</span><span class="p">);</span>
<span class="ln">238</span>        <span class="n">BlinkerAliGenie</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln">239</span>        <span class="n">BlinkerAliGenie</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln">240</span>        <span class="k">break</span><span class="p">;</span>
<span class="ln">241</span>    <span class="k">case</span> <span class="nl">BLINKER_CMD_QUERY_POWERSTATE_NUMBER</span><span class="p">:</span>
<span class="ln">242</span>        <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;AliGenie Query Power State&#34;</span><span class="p">);</span>
<span class="ln">243</span>        <span class="n">BlinkerAliGenie</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln">244</span>        <span class="n">BlinkerAliGenie</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln">245</span>        <span class="k">break</span><span class="p">;</span>
<span class="ln">246</span>    <span class="k">default</span><span class="o">:</span>
<span class="ln">247</span>        <span class="n">BlinkerAliGenie</span><span class="p">.</span><span class="n">powerState</span><span class="p">(</span><span class="n">oState</span> <span class="o">?</span> <span class="s">&#34;on&#34;</span> <span class="o">:</span> <span class="s">&#34;off&#34;</span><span class="p">);</span>
<span class="ln">248</span>        <span class="n">BlinkerAliGenie</span><span class="p">.</span><span class="nf">print</span><span class="p">();</span>
<span class="ln">249</span>        <span class="k">break</span><span class="p">;</span>
<span class="ln">250</span>    <span class="p">}</span>
<span class="ln">251</span><span class="p">}</span>
<span class="ln">252</span>
<span class="ln">253</span><span class="kt">void</span> <span class="nf">dataRead</span><span class="p">(</span><span class="k">const</span> <span class="kt">String</span> <span class="o">&amp;</span><span class="n">data</span><span class="p">)</span>
<span class="ln">254</span><span class="p">{</span>
<span class="ln">255</span>    <span class="n">BLINKER_LOG</span><span class="p">(</span><span class="s">&#34;Blinker readString: &#34;</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
<span class="ln">256</span>    <span class="n">Blinker</span><span class="p">.</span><span class="n">vibrate</span><span class="p">();</span>
<span class="ln">257</span>    <span class="kt">uint32_t</span> <span class="n">BlinkerTime</span> <span class="o">=</span> <span class="nf">millis</span><span class="p">();</span>
<span class="ln">258</span>    <span class="n">Blinker</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="s">&#34;millis&#34;</span><span class="p">,</span> <span class="n">BlinkerTime</span><span class="p">);</span>
<span class="ln">259</span><span class="p">}</span>
<span class="ln">260</span>
<span class="ln">261</span><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>
<span class="ln">262</span><span class="p">{</span>
<span class="ln">263</span>    <span class="nc">Serial</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
<span class="ln">264</span>    <span class="n">BLINKER_DEBUG</span><span class="p">.</span><span class="n">stream</span><span class="p">(</span><span class="nc">Serial</span><span class="p">);</span>
<span class="ln">265</span>    <span class="c1">// BLINKER_DEBUG.debugAll();
</span><span class="ln">266</span><span class="c1"></span>
<span class="ln">267</span>    <span class="n">myservo</span><span class="p">.</span><span class="nf">attach</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">//servo.attach():设置舵机数据引脚
</span><span class="ln">268</span><span class="c1"></span>    <span class="n">myservo</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="mi">90</span><span class="p">);</span>  <span class="c1">//servo.write():设置转动角度
</span><span class="ln">269</span><span class="c1"></span>
<span class="ln">270</span>    <span class="n">Button1</span><span class="p">.</span><span class="nf">attach</span><span class="p">(</span><span class="n">button1_callback</span><span class="p">);</span>
<span class="ln">271</span>    <span class="n">Slider1</span><span class="p">.</span><span class="nf">attach</span><span class="p">(</span><span class="n">slider1_callback</span><span class="p">);</span>
<span class="ln">272</span>    <span class="n">Blinker</span><span class="p">.</span><span class="n">attachHeartbeat</span><span class="p">(</span><span class="n">heartbeat</span><span class="p">);</span>
<span class="ln">273</span>
<span class="ln">274</span>    <span class="n">Blinker</span><span class="p">.</span><span class="nf">begin</span><span class="p">(</span><span class="n">auth</span><span class="p">,</span> <span class="n">ssid</span><span class="p">,</span> <span class="n">pswd</span><span class="p">);</span>
<span class="ln">275</span>    <span class="n">Blinker</span><span class="p">.</span><span class="n">attachData</span><span class="p">(</span><span class="n">dataRead</span><span class="p">);</span>
<span class="ln">276</span>
<span class="ln">277</span>    <span class="n">BlinkerMIOT</span><span class="p">.</span><span class="n">attachPowerState</span><span class="p">(</span><span class="n">miotPowerState</span><span class="p">);</span>
<span class="ln">278</span>    <span class="n">BlinkerMIOT</span><span class="p">.</span><span class="n">attachQuery</span><span class="p">(</span><span class="n">miotQuery</span><span class="p">);</span>
<span class="ln">279</span>
<span class="ln">280</span>    <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="n">attachPowerState</span><span class="p">(</span><span class="n">duerPowerState</span><span class="p">);</span>
<span class="ln">281</span>    <span class="n">BlinkerDuerOS</span><span class="p">.</span><span class="n">attachQuery</span><span class="p">(</span><span class="n">duerQuery</span><span class="p">);</span>
<span class="ln">282</span>
<span class="ln">283</span>    <span class="n">BlinkerAliGenie</span><span class="p">.</span><span class="n">attachPowerState</span><span class="p">(</span><span class="n">aligeniePowerState</span><span class="p">);</span>
<span class="ln">284</span>    <span class="n">BlinkerAliGenie</span><span class="p">.</span><span class="n">attachQuery</span><span class="p">(</span><span class="n">aligenieQuery</span><span class="p">);</span>
<span class="ln">285</span><span class="p">}</span>
<span class="ln">286</span>
<span class="ln">287</span><span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span>
<span class="ln">288</span><span class="p">{</span>
<span class="ln">289</span>    <span class="n">Blinker</span><span class="p">.</span><span class="nf">run</span><span class="p">();</span>
<span class="ln">290</span><span class="p">}</span>
</code></pre></div><p>  2. The light band of ws2812, combined with the fastled library, can achieve a variety of lighting effects，Take <code>esp8266</code> as an example：</p>
<div class="highlight"><pre class="chroma"><code class="language-ino" data-lang="ino"><span class="ln">  1</span><span class="c1">///////////////////////////////////////////////////////////////////////////K1灯效FastLED(依赖K2灯效FastLED)
</span><span class="ln">  2</span><span class="c1"></span>
<span class="ln">  3</span><span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">*</span><span class="n">SimplePatternList1</span><span class="p">[])();</span>
<span class="ln">  4</span><span class="n">SimplePatternList1</span> <span class="n">gPatterns1</span> <span class="o">=</span> <span class="p">{</span><span class="n">rainbow</span><span class="p">};</span> <span class="c1">//rainbow, rainbowWithGlitter, confetti, sinelon, juggle, bpm 6种特效切换
</span><span class="ln">  5</span><span class="c1"></span>
<span class="ln">  6</span><span class="c1">///////////////////////////////////////////////////////////////////////////K2灯效FastLED
</span><span class="ln">  7</span><span class="c1">// List of patterns to cycle through.  Each is defined as a separate function below.
</span><span class="ln">  8</span><span class="c1"></span><span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">*</span><span class="n">SimplePatternList</span><span class="p">[])();</span>
<span class="ln">  9</span><span class="n">SimplePatternList</span> <span class="n">gPatterns</span> <span class="o">=</span> <span class="p">{</span><span class="n">juggle</span><span class="p">};</span> <span class="c1">//rainbow, rainbowWithGlitter, confetti, sinelon, juggle, bpm 6种特效切换
</span><span class="ln"> 10</span><span class="c1"></span>
<span class="ln"> 11</span><span class="kt">uint8_t</span> <span class="n">gCurrentPatternNumber</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// Index number of which pattern is current
</span><span class="ln"> 12</span><span class="c1"></span><span class="kt">uint8_t</span> <span class="n">gHue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>                  <span class="c1">// rotating &#34;base color&#34; used by many of the patterns
</span><span class="ln"> 13</span><span class="c1"></span>
<span class="ln"> 14</span><span class="cp">#define ARRAY_SIZE(A) (sizeof(A) / sizeof((A)[0]))
</span><span class="ln"> 15</span><span class="cp"></span>
<span class="ln"> 16</span><span class="kt">void</span> <span class="nf">nextPattern</span><span class="p">()</span>
<span class="ln"> 17</span><span class="p">{</span>
<span class="ln"> 18</span>    <span class="c1">// add one to the current pattern number, and wrap around at the end
</span><span class="ln"> 19</span><span class="c1"></span>    <span class="n">gCurrentPatternNumber</span> <span class="o">=</span> <span class="p">(</span><span class="n">gCurrentPatternNumber</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">ARRAY_SIZE</span><span class="p">(</span><span class="n">gPatterns</span><span class="p">);</span>
<span class="ln"> 20</span><span class="p">}</span>
<span class="ln"> 21</span>
<span class="ln"> 22</span><span class="kt">void</span> <span class="nf">rainbow</span><span class="p">()</span>
<span class="ln"> 23</span><span class="p">{</span>
<span class="ln"> 24</span>    <span class="c1">// FastLED&#39;s built-in rainbow generator
</span><span class="ln"> 25</span><span class="c1"></span>    <span class="n">fill_rainbow</span><span class="p">(</span><span class="n">leds</span><span class="p">,</span> <span class="n">NUM_LEDS</span><span class="p">,</span> <span class="n">gHue</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="ln"> 26</span><span class="p">}</span>
<span class="ln"> 27</span>
<span class="ln"> 28</span><span class="kt">void</span> <span class="nf">rainbowWithGlitter</span><span class="p">()</span>
<span class="ln"> 29</span><span class="p">{</span>
<span class="ln"> 30</span>    <span class="c1">// built-in FastLED rainbow, plus some random sparkly glitter
</span><span class="ln"> 31</span><span class="c1"></span>    <span class="n">rainbow</span><span class="p">();</span>
<span class="ln"> 32</span>    <span class="n">addGlitter</span><span class="p">(</span><span class="mi">80</span><span class="p">);</span>
<span class="ln"> 33</span><span class="p">}</span>
<span class="ln"> 34</span>
<span class="ln"> 35</span><span class="kt">void</span> <span class="nf">addGlitter</span><span class="p">(</span><span class="n">fract8</span> <span class="n">chanceOfGlitter</span><span class="p">)</span>
<span class="ln"> 36</span><span class="p">{</span>
<span class="ln"> 37</span>    <span class="k">if</span> <span class="p">(</span><span class="n">random8</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">chanceOfGlitter</span><span class="p">)</span>
<span class="ln"> 38</span>    <span class="p">{</span>
<span class="ln"> 39</span>        <span class="n">leds</span><span class="p">[</span><span class="n">random16</span><span class="p">(</span><span class="n">NUM_LEDS</span><span class="p">)]</span> <span class="o">+=</span> <span class="n">CRGB</span><span class="o">::</span><span class="n">White</span><span class="p">;</span>
<span class="ln"> 40</span>    <span class="p">}</span>
<span class="ln"> 41</span><span class="p">}</span>
<span class="ln"> 42</span>
<span class="ln"> 43</span><span class="kt">void</span> <span class="nf">confetti</span><span class="p">()</span>
<span class="ln"> 44</span><span class="p">{</span>
<span class="ln"> 45</span>    <span class="c1">// random colored speckles that blink in and fade smoothly
</span><span class="ln"> 46</span><span class="c1"></span>    <span class="n">fadeToBlackBy</span><span class="p">(</span><span class="n">leds</span><span class="p">,</span> <span class="n">NUM_LEDS</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="ln"> 47</span>    <span class="kt">int</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">random16</span><span class="p">(</span><span class="n">NUM_LEDS</span><span class="p">);</span>
<span class="ln"> 48</span>    <span class="n">leds</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">+=</span> <span class="n">CHSV</span><span class="p">(</span><span class="n">gHue</span> <span class="o">+</span> <span class="n">random8</span><span class="p">(</span><span class="mi">64</span><span class="p">),</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<span class="ln"> 49</span><span class="p">}</span>
<span class="ln"> 50</span>
<span class="ln"> 51</span><span class="kt">void</span> <span class="nf">sinelon</span><span class="p">()</span>
<span class="ln"> 52</span><span class="p">{</span>
<span class="ln"> 53</span>    <span class="c1">// a colored dot sweeping back and forth, with fading trails
</span><span class="ln"> 54</span><span class="c1"></span>    <span class="n">fadeToBlackBy</span><span class="p">(</span><span class="n">leds</span><span class="p">,</span> <span class="n">NUM_LEDS</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
<span class="ln"> 55</span>    <span class="kt">int</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">beatsin16</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">NUM_LEDS</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="ln"> 56</span>    <span class="n">leds</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">+=</span> <span class="n">CHSV</span><span class="p">(</span><span class="n">gHue</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">192</span><span class="p">);</span>
<span class="ln"> 57</span><span class="p">}</span>
<span class="ln"> 58</span>
<span class="ln"> 59</span><span class="kt">void</span> <span class="nf">bpm</span><span class="p">()</span>
<span class="ln"> 60</span><span class="p">{</span>
<span class="ln"> 61</span>    <span class="c1">// colored stripes pulsing at a defined Beats-Per-Minute (BPM)
</span><span class="ln"> 62</span><span class="c1"></span>    <span class="kt">uint8_t</span> <span class="n">BeatsPerMinute</span> <span class="o">=</span> <span class="mi">62</span><span class="p">;</span>
<span class="ln"> 63</span>    <span class="n">CRGBPalette16</span> <span class="n">palette</span> <span class="o">=</span> <span class="n">PartyColors_p</span><span class="p">;</span>
<span class="ln"> 64</span>    <span class="kt">uint8_t</span> <span class="n">beat</span> <span class="o">=</span> <span class="n">beatsin8</span><span class="p">(</span><span class="n">BeatsPerMinute</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<span class="ln"> 65</span>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">NUM_LEDS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="ln"> 66</span>    <span class="p">{</span> <span class="c1">//9948
</span><span class="ln"> 67</span><span class="c1"></span>        <span class="n">leds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ColorFromPalette</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="n">gHue</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span> <span class="n">beat</span> <span class="o">-</span> <span class="n">gHue</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="mi">10</span><span class="p">));</span>
<span class="ln"> 68</span>    <span class="p">}</span>
<span class="ln"> 69</span><span class="p">}</span>
<span class="ln"> 70</span>
<span class="ln"> 71</span><span class="kt">void</span> <span class="nf">juggle</span><span class="p">()</span>
<span class="ln"> 72</span><span class="p">{</span>
<span class="ln"> 73</span>    <span class="c1">// eight colored dots, weaving in and out of sync with each other
</span><span class="ln"> 74</span><span class="c1"></span>    <span class="n">fadeToBlackBy</span><span class="p">(</span><span class="n">leds</span><span class="p">,</span> <span class="n">NUM_LEDS</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
<span class="ln"> 75</span>    <span class="kt">byte</span> <span class="n">dothue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="ln"> 76</span>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="ln"> 77</span>    <span class="p">{</span>
<span class="ln"> 78</span>        <span class="n">leds</span><span class="p">[</span><span class="n">beatsin16</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">NUM_LEDS</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">|=</span> <span class="n">CHSV</span><span class="p">(</span><span class="n">dothue</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
<span class="ln"> 79</span>        <span class="n">dothue</span> <span class="o">+=</span> <span class="mi">32</span><span class="p">;</span>
<span class="ln"> 80</span>    <span class="p">}</span>
<span class="ln"> 81</span><span class="p">}</span>
<span class="ln"> 82</span>
<span class="ln"> 83</span><span class="c1">///////////////////////////////////////////////////////////////////////////K3灯效
</span><span class="ln"> 84</span><span class="c1">//冷却：空气上升时会冷却多少？
</span><span class="ln"> 85</span><span class="c1">//冷却少=火焰高. 冷却更多=火焰更短.
</span><span class="ln"> 86</span><span class="c1">//默认值50，建议范围20-100
</span><span class="ln"> 87</span><span class="c1"></span><span class="cp">#define COOLING 50
</span><span class="ln"> 88</span><span class="cp"></span>
<span class="ln"> 89</span><span class="c1">//发出火花：有什么机会（总共255个）点燃新的火花？
</span><span class="ln"> 90</span><span class="c1">//更高的机会=更多的怒吼. 机会降低=火势更加闪烁.
</span><span class="ln"> 91</span><span class="c1">//默认值为120，建议范围为50-200.
</span><span class="ln"> 92</span><span class="c1"></span><span class="cp">#define SPARKING 120
</span><span class="ln"> 93</span><span class="cp"></span><span class="kt">bool</span> <span class="n">gReverseDirection</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="ln"> 94</span><span class="kt">void</span> <span class="nf">Fire2012</span><span class="p">()</span>
<span class="ln"> 95</span><span class="p">{</span>
<span class="ln"> 96</span>    <span class="c1">// Array of temperature readings at each simulation cell
</span><span class="ln"> 97</span><span class="c1"></span>    <span class="k">static</span> <span class="kt">byte</span> <span class="n">heat</span><span class="p">[</span><span class="n">NUM_LEDS</span><span class="p">];</span>
<span class="ln"> 98</span>
<span class="ln"> 99</span>    <span class="c1">// Step 1.  Cool down every cell a little
</span><span class="ln">100</span><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">NUM_LEDS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="ln">101</span>    <span class="p">{</span>
<span class="ln">102</span>        <span class="n">heat</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">qsub8</span><span class="p">(</span><span class="n">heat</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">random8</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">((</span><span class="n">COOLING</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span> <span class="o">/</span> <span class="n">NUM_LEDS</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span><span class="p">));</span>
<span class="ln">103</span>    <span class="p">}</span>
<span class="ln">104</span>
<span class="ln">105</span>    <span class="c1">// Step 2.  Heat from each cell drifts &#39;up&#39; and diffuses a little
</span><span class="ln">106</span><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">NUM_LEDS</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">k</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">k</span><span class="o">--</span><span class="p">)</span>
<span class="ln">107</span>    <span class="p">{</span>
<span class="ln">108</span>        <span class="n">heat</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">heat</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">heat</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">heat</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mi">3</span><span class="p">;</span>
<span class="ln">109</span>    <span class="p">}</span>
<span class="ln">110</span>
<span class="ln">111</span>    <span class="c1">// Step 3.  Randomly ignite new &#39;sparks&#39; of heat near the bottom
</span><span class="ln">112</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">random8</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">SPARKING</span><span class="p">)</span>
<span class="ln">113</span>    <span class="p">{</span>
<span class="ln">114</span>        <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">random8</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
<span class="ln">115</span>        <span class="n">heat</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">qadd8</span><span class="p">(</span><span class="n">heat</span><span class="p">[</span><span class="n">y</span><span class="p">],</span> <span class="n">random8</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span> <span class="mi">255</span><span class="p">));</span>
<span class="ln">116</span>    <span class="p">}</span>
<span class="ln">117</span>
<span class="ln">118</span>    <span class="c1">// Step 4.  Map from heat cells to LED colors
</span><span class="ln">119</span><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">NUM_LEDS</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="ln">120</span>    <span class="p">{</span>
<span class="ln">121</span>        <span class="n">CRGB</span> <span class="n">color</span> <span class="o">=</span> <span class="n">HeatColor</span><span class="p">(</span><span class="n">heat</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
<span class="ln">122</span>        <span class="kt">int</span> <span class="n">pixelnumber</span><span class="p">;</span>
<span class="ln">123</span>        <span class="k">if</span> <span class="p">(</span><span class="n">gReverseDirection</span><span class="p">)</span>
<span class="ln">124</span>        <span class="p">{</span>
<span class="ln">125</span>            <span class="n">pixelnumber</span> <span class="o">=</span> <span class="p">(</span><span class="n">NUM_LEDS</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">j</span><span class="p">;</span>
<span class="ln">126</span>        <span class="p">}</span>
<span class="ln">127</span>        <span class="k">else</span>
<span class="ln">128</span>        <span class="p">{</span>
<span class="ln">129</span>            <span class="n">pixelnumber</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
<span class="ln">130</span>        <span class="p">}</span>
<span class="ln">131</span>        <span class="n">leds</span><span class="p">[</span><span class="n">pixelnumber</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span><span class="p">;</span>
<span class="ln">132</span>    <span class="p">}</span>
<span class="ln">133</span><span class="p">}</span>
<span class="ln">134</span>
<span class="ln">135</span><span class="c1">///////////////////////////////////////////////////////////////////////////K4灯效
</span><span class="ln">136</span><span class="c1"></span><span class="cp">#if FASTLED_VERSION &lt; 3001000
</span><span class="ln">137</span><span class="cp">#error &#34;Requires FastLED 3.1 or later; check github for latest code.&#34;
</span><span class="ln">138</span><span class="cp">#endif
</span><span class="ln">139</span><span class="cp"></span><span class="c1">// This function draws rainbows with an ever-changing,
</span><span class="ln">140</span><span class="c1">// widely-varying set of parameters.
</span><span class="ln">141</span><span class="c1"></span><span class="kt">void</span> <span class="nf">pride</span><span class="p">()</span>
<span class="ln">142</span><span class="p">{</span>
<span class="ln">143</span>    <span class="k">static</span> <span class="kt">uint16_t</span> <span class="n">sPseudotime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="ln">144</span>    <span class="k">static</span> <span class="kt">uint16_t</span> <span class="n">sLastMillis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="ln">145</span>    <span class="k">static</span> <span class="kt">uint16_t</span> <span class="n">sHue16</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="ln">146</span>
<span class="ln">147</span>    <span class="kt">uint8_t</span> <span class="n">sat8</span> <span class="o">=</span> <span class="n">beatsin88</span><span class="p">(</span><span class="mi">87</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">250</span><span class="p">);</span>
<span class="ln">148</span>    <span class="kt">uint8_t</span> <span class="n">brightdepth</span> <span class="o">=</span> <span class="n">beatsin88</span><span class="p">(</span><span class="mi">341</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">224</span><span class="p">);</span>
<span class="ln">149</span>    <span class="kt">uint16_t</span> <span class="n">brightnessthetainc16</span> <span class="o">=</span> <span class="n">beatsin88</span><span class="p">(</span><span class="mi">203</span><span class="p">,</span> <span class="p">(</span><span class="mi">25</span> <span class="o">*</span> <span class="mi">256</span><span class="p">),</span> <span class="p">(</span><span class="mi">40</span> <span class="o">*</span> <span class="mi">256</span><span class="p">));</span>
<span class="ln">150</span>    <span class="kt">uint8_t</span> <span class="n">msmultiplier</span> <span class="o">=</span> <span class="n">beatsin88</span><span class="p">(</span><span class="mi">147</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>
<span class="ln">151</span>
<span class="ln">152</span>    <span class="kt">uint16_t</span> <span class="n">hue16</span> <span class="o">=</span> <span class="n">sHue16</span><span class="p">;</span> <span class="c1">//gHue * 256;
</span><span class="ln">153</span><span class="c1"></span>    <span class="kt">uint16_t</span> <span class="n">hueinc16</span> <span class="o">=</span> <span class="n">beatsin88</span><span class="p">(</span><span class="mi">113</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3000</span><span class="p">);</span>
<span class="ln">154</span>
<span class="ln">155</span>    <span class="kt">uint16_t</span> <span class="n">ms</span> <span class="o">=</span> <span class="nf">millis</span><span class="p">();</span>
<span class="ln">156</span>    <span class="kt">uint16_t</span> <span class="n">deltams</span> <span class="o">=</span> <span class="n">ms</span> <span class="o">-</span> <span class="n">sLastMillis</span><span class="p">;</span>
<span class="ln">157</span>    <span class="n">sLastMillis</span> <span class="o">=</span> <span class="n">ms</span><span class="p">;</span>
<span class="ln">158</span>    <span class="n">sPseudotime</span> <span class="o">+=</span> <span class="n">deltams</span> <span class="o">*</span> <span class="n">msmultiplier</span><span class="p">;</span>
<span class="ln">159</span>    <span class="n">sHue16</span> <span class="o">+=</span> <span class="n">deltams</span> <span class="o">*</span> <span class="n">beatsin88</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
<span class="ln">160</span>    <span class="kt">uint16_t</span> <span class="n">brightnesstheta16</span> <span class="o">=</span> <span class="n">sPseudotime</span><span class="p">;</span>
<span class="ln">161</span>
<span class="ln">162</span>    <span class="k">for</span> <span class="p">(</span><span class="kt">uint16_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">NUM_LEDS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="ln">163</span>    <span class="p">{</span>
<span class="ln">164</span>        <span class="n">hue16</span> <span class="o">+=</span> <span class="n">hueinc16</span><span class="p">;</span>
<span class="ln">165</span>        <span class="kt">uint8_t</span> <span class="n">hue8</span> <span class="o">=</span> <span class="n">hue16</span> <span class="o">/</span> <span class="mi">256</span><span class="p">;</span>
<span class="ln">166</span>
<span class="ln">167</span>        <span class="n">brightnesstheta16</span> <span class="o">+=</span> <span class="n">brightnessthetainc16</span><span class="p">;</span>
<span class="ln">168</span>        <span class="kt">uint16_t</span> <span class="n">b16</span> <span class="o">=</span> <span class="n">sin16</span><span class="p">(</span><span class="n">brightnesstheta16</span><span class="p">)</span> <span class="o">+</span> <span class="mi">32768</span><span class="p">;</span>
<span class="ln">169</span>
<span class="ln">170</span>        <span class="kt">uint16_t</span> <span class="n">bri16</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)((</span><span class="kt">uint32_t</span><span class="p">)</span><span class="n">b16</span> <span class="o">*</span> <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span><span class="n">b16</span><span class="p">)</span> <span class="o">/</span> <span class="mi">65536</span><span class="p">;</span>
<span class="ln">171</span>        <span class="kt">uint8_t</span> <span class="n">bri8</span> <span class="o">=</span> <span class="p">(</span><span class="kt">uint32_t</span><span class="p">)(((</span><span class="kt">uint32_t</span><span class="p">)</span><span class="n">bri16</span><span class="p">)</span> <span class="o">*</span> <span class="n">brightdepth</span><span class="p">)</span> <span class="o">/</span> <span class="mi">65536</span><span class="p">;</span>
<span class="ln">172</span>        <span class="n">bri8</span> <span class="o">+=</span> <span class="p">(</span><span class="mi">255</span> <span class="o">-</span> <span class="n">brightdepth</span><span class="p">);</span>
<span class="ln">173</span>
<span class="ln">174</span>        <span class="n">CRGB</span> <span class="n">newcolor</span> <span class="o">=</span> <span class="n">CHSV</span><span class="p">(</span><span class="n">hue8</span><span class="p">,</span> <span class="n">sat8</span><span class="p">,</span> <span class="n">bri8</span><span class="p">);</span>
<span class="ln">175</span>
<span class="ln">176</span>        <span class="kt">uint16_t</span> <span class="n">pixelnumber</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
<span class="ln">177</span>        <span class="n">pixelnumber</span> <span class="o">=</span> <span class="p">(</span><span class="n">NUM_LEDS</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">pixelnumber</span><span class="p">;</span>
<span class="ln">178</span>
<span class="ln">179</span>        <span class="n">nblend</span><span class="p">(</span><span class="n">leds</span><span class="p">[</span><span class="n">pixelnumber</span><span class="p">],</span> <span class="n">newcolor</span><span class="p">,</span> <span class="mi">64</span><span class="p">);</span>
<span class="ln">180</span>    <span class="p">}</span>
<span class="ln">181</span><span class="p">}</span>
<span class="ln">182</span><span class="kt">void</span> <span class="nf">mode_2</span><span class="p">()</span>
<span class="ln">183</span><span class="p">{</span>
<span class="ln">184</span>    <span class="k">if</span> <span class="p">(</span><span class="n">BRIGHTNESS</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">)</span>
<span class="ln">185</span>    <span class="p">{</span>
<span class="ln">186</span>        <span class="n">BRIGHTNESS</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
<span class="ln">187</span>        <span class="n">Slider1</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">BRIGHTNESS</span><span class="p">);</span>
<span class="ln">188</span>    <span class="p">}</span>
<span class="ln">189</span>    <span class="n">FastLED</span><span class="p">.</span><span class="n">setBrightness</span><span class="p">(</span><span class="n">BRIGHTNESS</span><span class="p">);</span> <span class="c1">//实时更新亮度
</span><span class="ln">190</span><span class="c1"></span>    <span class="n">gPatterns1</span><span class="p">[</span><span class="n">gCurrentPatternNumber</span><span class="p">]();</span>
<span class="ln">191</span>    <span class="n">FastLED</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
<span class="ln">192</span>    <span class="n">FastLED</span><span class="p">.</span><span class="nf">delay</span><span class="p">(</span><span class="mi">200</span> <span class="o">/</span> <span class="n">UPDATES_PER_SECOND</span><span class="p">);</span>
<span class="ln">193</span>    <span class="n">EVERY_N_MILLISECONDS</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="p">{</span> <span class="n">gHue</span><span class="o">++</span><span class="p">;</span> <span class="p">}</span>   <span class="c1">// slowly cycle the &#34;base color&#34; through the rainbow
</span><span class="ln">194</span><span class="c1"></span>    <span class="n">EVERY_N_SECONDS</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">{</span> <span class="n">nextPattern</span><span class="p">();</span> <span class="p">}</span> <span class="c1">// change patterns periodically
</span><span class="ln">195</span><span class="c1"></span><span class="p">}</span>
<span class="ln">196</span>
<span class="ln">197</span><span class="kt">void</span> <span class="nf">mode_3</span><span class="p">()</span>
<span class="ln">198</span><span class="p">{</span>
<span class="ln">199</span>    <span class="k">if</span> <span class="p">(</span><span class="n">BRIGHTNESS</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">)</span>
<span class="ln">200</span>    <span class="p">{</span>
<span class="ln">201</span>        <span class="n">BRIGHTNESS</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
<span class="ln">202</span>        <span class="n">Slider1</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">BRIGHTNESS</span><span class="p">);</span>
<span class="ln">203</span>    <span class="p">}</span>
<span class="ln">204</span>    <span class="n">FastLED</span><span class="p">.</span><span class="n">setBrightness</span><span class="p">(</span><span class="n">BRIGHTNESS</span><span class="p">);</span> <span class="c1">//实时更新亮度
</span><span class="ln">205</span><span class="c1"></span>    <span class="n">gPatterns</span><span class="p">[</span><span class="n">gCurrentPatternNumber</span><span class="p">]();</span>
<span class="ln">206</span>    <span class="n">FastLED</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
<span class="ln">207</span>    <span class="n">FastLED</span><span class="p">.</span><span class="nf">delay</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="p">(</span><span class="n">UPDATES_PER_SECOND</span> <span class="o">/</span> <span class="mi">10</span><span class="p">));</span>
<span class="ln">208</span>
<span class="ln">209</span>    <span class="c1">// do some periodic updates
</span><span class="ln">210</span><span class="c1"></span>    <span class="n">EVERY_N_MILLISECONDS</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="p">{</span> <span class="n">gHue</span><span class="o">++</span><span class="p">;</span> <span class="p">}</span>   <span class="c1">// slowly cycle the &#34;base color&#34; through the rainbow
</span><span class="ln">211</span><span class="c1"></span>    <span class="n">EVERY_N_SECONDS</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">{</span> <span class="n">nextPattern</span><span class="p">();</span> <span class="p">}</span> <span class="c1">// change patterns periodically
</span><span class="ln">212</span><span class="c1"></span><span class="p">}</span>
<span class="ln">213</span>
<span class="ln">214</span><span class="kt">void</span> <span class="nf">mode_4</span><span class="p">()</span>
<span class="ln">215</span><span class="p">{</span>
<span class="ln">216</span>    <span class="k">if</span> <span class="p">(</span><span class="n">BRIGHTNESS</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">)</span>
<span class="ln">217</span>    <span class="p">{</span>
<span class="ln">218</span>        <span class="n">BRIGHTNESS</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
<span class="ln">219</span>        <span class="n">Slider1</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">BRIGHTNESS</span><span class="p">);</span>
<span class="ln">220</span>    <span class="p">}</span>
<span class="ln">221</span>    <span class="n">Fire2012</span><span class="p">();</span>
<span class="ln">222</span>    <span class="n">FastLED</span><span class="p">.</span><span class="n">setBrightness</span><span class="p">(</span><span class="n">BRIGHTNESS</span><span class="p">);</span> <span class="c1">//实时更新亮度
</span><span class="ln">223</span><span class="c1"></span>    <span class="n">FastLED</span><span class="p">.</span><span class="nf">delay</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">UPDATES_PER_SECOND</span><span class="p">);</span>
<span class="ln">224</span><span class="p">}</span>
<span class="ln">225</span>
<span class="ln">226</span><span class="kt">void</span> <span class="nf">mode_5</span><span class="p">()</span>
<span class="ln">227</span><span class="p">{</span>
<span class="ln">228</span>    <span class="k">if</span> <span class="p">(</span><span class="n">BRIGHTNESS</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">)</span>
<span class="ln">229</span>    <span class="p">{</span>
<span class="ln">230</span>        <span class="n">BRIGHTNESS</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
<span class="ln">231</span>        <span class="n">Slider1</span><span class="p">.</span><span class="nf">print</span><span class="p">(</span><span class="n">BRIGHTNESS</span><span class="p">);</span>
<span class="ln">232</span>    <span class="p">}</span>
<span class="ln">233</span>    <span class="n">FastLED</span><span class="p">.</span><span class="n">setBrightness</span><span class="p">(</span><span class="n">BRIGHTNESS</span><span class="p">);</span> <span class="c1">//实时更新亮度
</span><span class="ln">234</span><span class="c1"></span>    <span class="n">pride</span><span class="p">();</span>
<span class="ln">235</span>    <span class="n">FastLED</span><span class="p">.</span><span class="n">show</span><span class="p">();</span>
<span class="ln">236</span>    <span class="n">FastLED</span><span class="p">.</span><span class="nf">delay</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="p">(</span><span class="n">UPDATES_PER_SECOND</span> <span class="o">/</span> <span class="mi">5</span><span class="p">));</span>
<span class="ln">237</span><span class="p">}</span>
<span class="ln">238</span>
</code></pre></div><p>  3. Esp32-cam is equipped with a camera, which can build a video monitoring vehicle. The schematic diagram and PCB of esp32-cam base and the PCB of trolley base are as follows：</p>
<p>
    <img class="img-fluid" alt="ESP32-CAM底座原理图" src="/en/docs/smart-home/images/ESP32dz_hue8dcb1dc045429628b42590863cfe47e_111510_800x0_resize_box_2.png" loading="lazy"
   width="800" height="567"
   />

</p>
<p>
    <img class="img-fluid" alt="ESP32-CAM底座PCB" src="/en/docs/smart-home/images/ESP32dzpcb_hu3ba56ab39a287fb0cd8019377d733e59_25614_800x0_resize_box_2.png" loading="lazy"
   width="800" height="572"
   />

</p>
<p>
    <img class="img-fluid" alt="ESP32-CAM小车PCB" src="/en/docs/smart-home/images/ESP32xcpcb_hu941527d9a404a6938621738768f1f365_72297_800x0_resize_box_2.png" loading="lazy"
   width="800" height="834"
   />

</p>
<p>  Take <code>esp32</code> as an example：</p>
<div class="highlight"><pre class="chroma"><code class="language-ino" data-lang="ino"><span class="ln"> 1</span><span class="kt">int</span> <span class="nf">calculatePWM</span><span class="p">(</span><span class="kt">int</span> <span class="n">degree</span><span class="p">)</span> <span class="c1">//舵机角度
</span><span class="ln"> 2</span><span class="c1"></span><span class="p">{</span>
<span class="ln"> 3</span>    <span class="c1">//20ms周期，高电平0.5-2.5ms，对应0-180度角度
</span><span class="ln"> 4</span><span class="c1"></span>    <span class="k">const</span> <span class="kt">float</span> <span class="n">deadZone</span> <span class="o">=</span> <span class="mf">6.4</span><span class="p">;</span> <span class="c1">//对应0.5ms（0.5ms/(20ms/256）)
</span><span class="ln"> 5</span><span class="c1"></span>    <span class="k">const</span> <span class="kt">float</span> <span class="nf">max</span> <span class="o">=</span> <span class="mi">32</span><span class="p">;</span>       <span class="c1">//对应2.5ms
</span><span class="ln"> 6</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">degree</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="ln"> 7</span>        <span class="n">degree</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="ln"> 8</span>    <span class="k">if</span> <span class="p">(</span><span class="n">degree</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">)</span>
<span class="ln"> 9</span>        <span class="n">degree</span> <span class="o">=</span> <span class="mi">180</span><span class="p">;</span>
<span class="ln">10</span>    <span class="k">return</span> <span class="p">(</span><span class="kt">int</span><span class="p">)(((</span><span class="nf">max</span> <span class="o">-</span> <span class="n">deadZone</span><span class="p">)</span> <span class="o">/</span> <span class="mi">180</span><span class="p">)</span> <span class="o">*</span> <span class="n">degree</span> <span class="o">+</span> <span class="n">deadZone</span><span class="p">);</span>
<span class="ln">11</span><span class="p">}</span>
<span class="ln">12</span>
<span class="ln">13</span><span class="kt">void</span> <span class="nf">servo_360</span><span class="p">()</span> <span class="c1">//360度舵机控制
</span><span class="ln">14</span><span class="c1"></span><span class="p">{</span>
<span class="ln">15</span>    <span class="k">if</span> <span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">128</span><span class="p">)</span>
<span class="ln">16</span>    <span class="p">{</span>
<span class="ln">17</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">servo_channel</span><span class="p">,</span> <span class="n">calculatePWM</span><span class="p">(</span><span class="mi">88</span><span class="p">));</span> <span class="c1">// 输出PWM
</span><span class="ln">18</span><span class="c1"></span>    <span class="p">}</span>
<span class="ln">19</span>    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">y</span> <span class="o">==</span> <span class="mi">128</span><span class="p">)</span>
<span class="ln">20</span>    <span class="p">{</span>
<span class="ln">21</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">servo_channel</span><span class="p">,</span> <span class="n">calculatePWM</span><span class="p">(</span><span class="mi">92</span><span class="p">));</span> <span class="c1">// 输出PWM
</span><span class="ln">22</span><span class="c1"></span>    <span class="p">}</span>
<span class="ln">23</span>    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mi">128</span><span class="p">)</span>
<span class="ln">24</span>    <span class="p">{</span>
<span class="ln">25</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">servo_channel</span><span class="p">,</span> <span class="n">calculatePWM</span><span class="p">(</span><span class="mi">96</span><span class="p">));</span> <span class="c1">// 输出PWM
</span><span class="ln">26</span><span class="c1"></span>    <span class="p">}</span>
<span class="ln">27</span><span class="p">}</span>
<span class="ln">28</span>
<span class="ln">29</span><span class="kt">void</span> <span class="nf">xunhuan</span><span class="p">()</span>
<span class="ln">30</span><span class="p">{</span>
<span class="ln">31</span>    <span class="n">ledcWrite</span><span class="p">(</span><span class="n">servo_channel</span><span class="p">,</span> <span class="n">calculatePWM</span><span class="p">(</span><span class="n">angle</span><span class="p">));</span> <span class="c1">// 输出PWM
</span><span class="ln">32</span><span class="c1"></span>    <span class="n">ledcWrite</span><span class="p">(</span><span class="n">flashled_channel</span><span class="p">,</span> <span class="n">flashled_pwm</span><span class="p">);</span>     <span class="c1">// 输出PWM
</span><span class="ln">33</span><span class="c1"></span>    <span class="k">if</span> <span class="p">((</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="mf">37.5</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mf">37.5</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="mf">217.5</span><span class="p">))</span><span class="c1">//前进
</span><span class="ln">34</span><span class="c1"></span>    <span class="p">{</span>
<span class="ln">35</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorA1_channel</span><span class="p">,</span> <span class="n">motor_pwm</span><span class="p">);</span>
<span class="ln">36</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorA2_channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="ln">37</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorB1_channel</span><span class="p">,</span> <span class="n">motor_pwm</span><span class="p">);</span>
<span class="ln">38</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorB2_channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="ln">39</span>    <span class="p">}</span>
<span class="ln">40</span>    <span class="k">if</span> <span class="p">((</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="mf">37.5</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="mf">37.5</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="mf">217.5</span><span class="p">))</span><span class="c1">//左转
</span><span class="ln">41</span><span class="c1"></span>    <span class="p">{</span>
<span class="ln">42</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorA1_channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="ln">43</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorA2_channel</span><span class="p">,</span> <span class="n">motor_pwm</span><span class="p">);</span>
<span class="ln">44</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorB1_channel</span><span class="p">,</span> <span class="n">motor_pwm</span><span class="p">);</span>
<span class="ln">45</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorB2_channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="ln">46</span>    <span class="p">}</span>
<span class="ln">47</span>    <span class="k">if</span> <span class="p">((</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mf">217.5</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="mf">37.5</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">y</span> <span class="o">&lt;=</span> <span class="mf">217.5</span><span class="p">))</span><span class="c1">//右转
</span><span class="ln">48</span><span class="c1"></span>    <span class="p">{</span>
<span class="ln">49</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorA1_channel</span><span class="p">,</span> <span class="n">motor_pwm</span><span class="p">);</span>
<span class="ln">50</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorA2_channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="ln">51</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorB1_channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="ln">52</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorB2_channel</span><span class="p">,</span> <span class="n">motor_pwm</span><span class="p">);</span>
<span class="ln">53</span>    <span class="p">}</span>
<span class="ln">54</span>    <span class="k">if</span> <span class="p">((</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="mf">217.5</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mf">37.5</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;=</span> <span class="mf">217.5</span><span class="p">))</span><span class="c1">//后退
</span><span class="ln">55</span><span class="c1"></span>    <span class="p">{</span>
<span class="ln">56</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorA1_channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="ln">57</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorA2_channel</span><span class="p">,</span> <span class="n">motor_pwm</span><span class="p">);</span>
<span class="ln">58</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorB1_channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="ln">59</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorB2_channel</span><span class="p">,</span> <span class="n">motor_pwm</span><span class="p">);</span>
<span class="ln">60</span>    <span class="p">}</span>
<span class="ln">61</span>     <span class="k">if</span> <span class="p">((</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mf">37.5</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mf">217.5</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">y</span> <span class="o">&gt;</span> <span class="mf">37.5</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mf">217.5</span><span class="p">))</span><span class="c1">//后退
</span><span class="ln">62</span><span class="c1"></span>    <span class="p">{</span>
<span class="ln">63</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorA1_channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="ln">64</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorA2_channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="ln">65</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorB1_channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="ln">66</span>        <span class="n">ledcWrite</span><span class="p">(</span><span class="n">motorB2_channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="ln">67</span>    <span class="p">}</span>
<span class="ln">68</span><span class="p">}</span>
</code></pre></div><p>  The complete source code of relevant projects in this article has been uploaded to gitee，<a href="https://gitee.com/wawmm/smart-home" target="_blank" rel="noopener noreferrer">Click to view</a> More smart home project source code, such as smart fan, smart air conditioner, smart socket and so on.</p></div></div>
<div class="card-footer"><div class="post-navs d-flex justify-content-evenly">
  <div class="post-nav post-prev"><i class="fas fa-fw fa-chevron-left"></i>
    <a href="/en/docs/test-tooling/">Test-Tooling
</a>
  </div><div class="post-nav post-next">
    <a href="/en/docs/wechat-applet/">Wechat-Applet
</a>
    <i class="fas fa-fw fa-chevron-right"></i>
  </div></div></div>
</article><div class="post-copyright mb-3 row card component" id="post-copyright">
    <div class="card-header">
        <h2 class="card-title">Copyright</h2>
    </div>
    <div class="card-body"><a class="d-flex align-items-center flex-column" target="_blank" rel="license noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.en">
  <span><i class="fab fa-fw fa-2x fa-creative-commons"></i><i class="fab fa-fw fa-2x fa-creative-commons-by"></i><i class="fab fa-fw fa-2x fa-creative-commons-nc"></i><i class="fab fa-fw fa-2x fa-creative-commons-nd"></i></span>
  CC BY-NC-ND 4.0 
</a>


    </div>
</div></div>
</div><aside class="sidebar d-flex docs-sidebar col-lg-3 position-sticky">
  <div class="container">
    
    <div class="post-toc row mb-4 card component" id="postTOC">
  <div class="card-header">
    <h2 class="card-title">Contents</h2>
  </div>
  <div class="card-body">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction-to-smart-home">Introduction to Smart-Home</a></li>
    <li><a href="#project-realization">Project realization</a></li>
    <li><a href="#concrete-step">Concrete Step</a></li>
  </ul>
</nav>
  </div>
</div>
    <section class="recent-posts row card component">
  <div class="card-header">
    <h2 class="card-title">Recent Posts</h2>
  </div>
  <div class="card-body">
    <ul class="post-list"><li>
        <a href="/en/docs/autojs/">Autojs
</a>
      </li><li>
        <a href="/en/docs/wechat-applet/">Wechat-Applet
</a>
      </li><li>
        <a href="/en/docs/smart-home/">Smart-Home
</a>
      </li><li>
        <a href="/en/docs/test-tooling/">Test-Tooling
</a>
      </li><li>
        <a href="/en/docs/xintang-project-hall-induction/">Xintang-Project-Hall-Induction
</a>
      </li></ul>
  </div>
</section>

  </div>
</aside>
</div>
    </main><footer class="footer mt-auto py-3 text-center container"><ul class="nav justify-content-between footer-memu mb-3"><li class="nav-item"><ul class="nav flex-column align-items-start">
      <li class="nav-item">
        <a class="nav-link fw-bold" target="_blank" rel="noopener noreferrer">Menu
</a>
      </li><li class="nav-item">
            <a class="nav-link" href="/en/about/"><i class="fas fa-fw fa-user"></i>Resume
</a>
        </li><li class="nav-item">
            <a class="nav-link" href="https://gitee.com/wawmm" target="_blank" rel="noopener noreferrer"><i class="fab fa-fw fa-github"></i>Gitee
</a>
        </li><li class="nav-item">
            <a class="nav-link" href="https://github.com/wawmb/wawmb.github.io" target="_blank" rel="noopener noreferrer"><i class="fas fa-fw fa-question-circle"></i>Github
</a>
        </li></ul></li><li class="nav-item"><ul class="nav flex-column align-items-start">
      <li class="nav-item">
        <a class="nav-link fw-bold" target="_blank" rel="noopener noreferrer">Docs
</a>
      </li><li class="nav-item">
            <a class="nav-link" href="/en/posts/markdown-syntax/">Markdown Syntax Guide
</a>
        </li><li class="nav-item">
            <a class="nav-link" href="/en/docs/autojs/">Autojs
</a>
        </li><li class="nav-item">
            <a class="nav-link" href="/en/docs/electronic-contest/">Electronic-Contest
</a>
        </li><li class="nav-item">
            <a class="nav-link" href="/en/docs/hetai-project/">Hetai-Project
</a>
        </li><li class="nav-item">
            <a class="nav-link" href="/en/docs/smart-home/">Smart-Home
</a>
        </li><li class="nav-item">
            <a class="nav-link" href="/en/docs/test-tooling/">Test-Tooling
</a>
        </li><li class="nav-item">
            <a class="nav-link" href="/en/docs/wechat-applet/">Wechat-Applet
</a>
        </li><li class="nav-item">
            <a class="nav-link" href="/en/docs/xintang-project-digital-display/">Xintang-Project-Digital-Display
</a>
        </li><li class="nav-item">
            <a class="nav-link" href="/en/docs/xintang-project-hall-induction/">Xintang-Project-Hall-Induction
</a>
        </li></ul></li><li class="nav-item"><ul class="nav flex-column align-items-start">
      <li class="nav-item">
        <a class="nav-link fw-bold" target="_blank" rel="noopener noreferrer">Study
</a>
      </li><li class="nav-item">
            <a class="nav-link" href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo
</a>
        </li></ul></li></ul><nav class="social-links nav justify-content-center mb-2"><a class="nav-link social-link" target="_blank" href="https://space.bilibili.com/" title="bilibili" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-bilibili"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://bitbucket.org/" title="Bitbucket" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-bitbucket"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://discord.com/invite/" title="Discord" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-discord"></i>
      </a><a class="nav-link social-link" target="_blank" href="" title="Discourse" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-discourse"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://hub.docker.com/u/e" title="Docker Hub" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-docker"></i>
      </a><a class="nav-link social-link" href="mailto:wawmmb@sina.cn" title="Email">
      <i class="fas fa-fw fa-2x fa-envelope"></i>
    </a><a class="nav-link social-link" target="_blank" href="https://facebook.com/" title="Facebook" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-facebook-f"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://facebook.com/groups/" title="Facebook Group" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-facebook-square"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://github.com/https://github.com/wawmb/wawmb.github.io" title="GitHub" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-github"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://gitlab.com/" title="GitLab" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-gitlab"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://www.instagram.com/" title="Instagram" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-instagram"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://kaggle.com/" title="Kaggle" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-kaggle"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://www.last.fm/user/" title="Last.fm" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-lastfm"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://linkedin.com/" title="LinkedIn" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-linkedin-in"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://medium.com/@" title="Medium" rel="noopener noreferrer">
        <i class="fab fa-fw fa-2x fa-medium-m"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://www.pinterest.com/" title="Pinterest" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-pinterest"></i>
      </a><a class="nav-link social-link" target="_blank" href="http://wpa.qq.com/msgrd?v=3&amp;uin=1642348878&amp;site=qq&amp;menu=yes" title="QQ" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-qq"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://www.quora.com/profile/" title="Quora" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-quora"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://www.reddit.com/user/" title="Reddit" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-reddit"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://stackoverflow.com/users/" title="Stack Overflow" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-stack-overflow"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://t.me/" title="Telegram" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-telegram-plane"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://www.tiktok.com/@" title="TikTok" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-tiktok"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://.tumblr.com" title="Tumblr" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-tumblr"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://twitter.com/" title="Twitter" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-twitter"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://weibo.com/" title="Weibo" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-weibo"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://www.youtube.com/channel/" title="Youtube" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-youtube"></i>
      </a><a class="nav-link social-link" target="_blank" href="https://www.zhihu.com/people/" title="Zhihu" rel="noopener noreferrer">
        <i class="fa-fw fa-2x fab fa-zhihu"></i>
      </a></nav>
<div class="copyright mb-2">
  Copyright © 2016-2022 Dustin Huang. All Rights Reserved.
</div>


</footer>
<script src="/js/main.2d7cc08433fd5cc4979effb84c951d48f20ab2151a0857e244e91ab5421293ac.js" integrity="sha256-LXzAhDP9XMSXnv&#43;4TJUdSPIKshUaCFfiROkatUISk6w=" crossorigin="anonymous" defer></script><script src="/js/icons.min.8ddcaafc364ff0296c2209c5495287f0de039b852da9b24847f94c198b7639b6.js" integrity="sha256-jdyq/DZP8ClsIgnFSVKH8N4Dm4UtqbJIR/lMGYt2ObY=" crossorigin="anonymous" defer></script>
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('\/service-worker.js').then(function(reg) {
      console.log('Successfully registered service worker', reg);
    }).catch(function(err) {
      console.warn('Error whilst registering service worker', err);
    });
  });
}
</script><script src="/js/viewer.min.33f769b3bb2415045aecd0ae9bc8196997beaaabf70c9f8bf301d28851d95740.js" integrity="sha256-M/dps7skFQRa7NCum8gZaZe&#43;qqv3DJ&#43;L8wHSiFHZV0A=" crossorigin="anonymous" defer></script>
</body>
</html>
